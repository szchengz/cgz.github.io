---
title: note-20190121
tags:
  - 标签
date: 2019-01-21 09:31:52
categories: 笔记
description:
---

# hive笔记
IMPORT TABLE employee_imported FROM '/apps/ca/yanh/data';
EXPORT TABLE employee_partitioned PARTITION (year=2015,month=05) TO '/apps/ca/yanh/data1';

数据排序 数据排序主要包括：ORDER, and SORT. 该操作同样经常使用，以便生成已排序表从而进行后面的包括top N, maximum, minimum等取值操作。 主要操作包括ORDER BY (ASC|DESC)、SORT BY(ASC|DESC)、DISTRIBUTE BY、CLUSTER BY

3. DISTRIBUTE BY 该操作类似于RDBMS中的GROUP BY，根据制定的列将mapper的输出分组发送至reducer，而不是根据partition来分组数据。 注：如果使用了SORT BY，那么必须在DISTRIBUTE BY之后，且要分发的列必须出现在已选择的列中（因为SORT BY的性质）。

SELECT name,employee_id FROM employee_hr DISTRIBUTE BY employee_id SORT BY name;

4. CLUSTER BY CLUSTER BY类似于DISTRIBUTE BY和SORT BY的组合作用（作用于相同列）,但不同于ORDER BY的是它仅在每个reducer进行排序，而不是全局排序，且不支持ASC和DESC。如果要实现全局排序，可以先进行CLUSTER BY然后再ORDER BY。

SELECT name, employee_id FROM employee_hr CLUSTER BY name;


ARRAY_CONTAINS 声明用于使用TRUE或FALSE返回值检验指定列是否包含指定值。
SORT_ARRAY 声明用于对数组进行升序排序。
例： hive> SELECT ARRAY_CONTAINS(work_place, 'Toronto') AS is_Toronto, SORT_ARRAY(work_place) AS sorted_array FROM employee;

https://blog.csdn.net/dxl342/article/details/70842839
