
# 03-大数-据$离线计算Hadoop-1

MTpoTTY

## IDEA 活动模板


## Linux查找命令
find . | grep hello


## IDEA破解方法
http://idea.lanyus.com/
http://blog.lanyus.com/archives/174.html


## 让别人有写的权限

hdfs dfs -chmod o+w /user/centos

## 查看所有目录文件（递回）
hdfs dfs -lsr

## 查看配置文件
hdfs getconf -namenode
hdfs getconf -confKey dfs.namenode.fs-limits.min-block-size

## NameNode 名称节点

名称节点存储镜像文件和编辑日志

http://os1:50070/dfshealth.html#tab-startup-progress
startup-progress

## DataNode 数据节点



## shell 批量操作

xcall.sh

```sh
#!/bin/bash

params=$@
i=201
for (( i=201 ; i <= 204 ; i = $i + 1 )) ; do
    echo ============= s$i $params =============
    ssh s$i "$params"
done

```

> xcall.sh jps

## 分发脚本

xsync.sh

```sh

#!/bin/bash

if [[ $# -lt 1 ]] ; then echo no params ; exit ; fi

p=$1
#echo p=$p
dir=`dirname $p`
#echo dir=$dir
filename=`basename $p`
#echo filename=$filename
cd $dir
fullpath=`pwd -P .`
#echo fullpath=$fullpath

user=`whoami`
for (( i = 202 ; i <= 204 ; i = $i + 1 )) ; do
   echo ======= s$i =======
   rsync -lr $p ${user}@s$i:$fullpath
done ;


```

> xsync.sh /soft/.../hdfs-site.xml

## hdfs的最小blocksize,必须是512的位数


查看HDFS文件
> hdfs dfs -lsr

查看帮助
hdfs

文件夹没有副本
文件夹也没有block

使用oiv命令查询hadoop镜像文件
------------------------------
	hdfs oiv -i fsimage -o a.xml -p XML			//查看镜像文件。

  hdfs dfsadmin管理命令
  ----------------------
  	$>hdfs dfsadmin					//查看帮助
  	$>hdfs dfsadmin	-help rollEdits	//查看指定命令的帮助
  	$>hdfs dfsadmin -rollEdits		//滚动编辑日志

    启动hdfs时，镜像文件编辑日志进行融合，编辑日志滚动。

  查看hdfs是否在安全模式
  ------------------------
  	$>hdfs dfsadmin -safemode  enter		//进入
  	$>hdfs dfsadmin -safemode  get			//查看
  	$>hdfs dfsadmin -safemode  leave		//退出
  	$>hdfs dfsadmin -safemode  wait			//等待


追加
echo abc >> a.txt
覆盖
echo a > a.txt
echo -n a > a.txt
查看
ls -al | grep a

向HDFS追加文件
hdfs dfs -appendToFile tom.txt data/1.txt

查找HDFS文件在本地文件在位置 xxxx877是id编号
find . | grep xxx877
